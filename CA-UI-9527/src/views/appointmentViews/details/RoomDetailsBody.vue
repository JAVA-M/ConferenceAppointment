<template>
  <div class="joe_main joe_post" style="padding: 0">
    <div class="joe_container joe_bread">
      <ul class="joe_bread__bread">
        <li class="item">
          <svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
            <path d="M307.867 805.441h408.266V575.792c0-15.31 29.344-22.046 44.654-22.046 15.336 0 27.762 12.426 27.762 27.762v277.544c0 15.335-12.426 27.762-27.762 27.762h-499.59c-15.31 0-27.762-12.427-27.762-27.762V581.507c0-15.31 12.426-27.762 27.762-27.762 15.31 0 46.67 6.71 46.67 22.046v229.65zM205.8 524.758c-10.845 10.845-56.851 3.93-67.696-6.89a27.762 27.762 0 0 1-.025-39.295l353.253-353.227a27.762 27.762 0 0 1 39.296 0L883.93 478.573a27.813 27.813 0 0 1-12.478 46.491c-9.568 2.552-46.236 6.686-53.253-.331L512 218.559 205.8 524.758z" />
          </svg>
          <router-link
            to="/webHome"
            class="link"
            title="首页"
          >首页</router-link>
        </li>
      </ul>
    </div>

    <!--  加载动画  -->
    <div v-if="loading" class="joe_archive">
      <ul class="joe_list__loading">
        <li class="item">
          <div class="thumbnail" />
          <div class="information">
            <div class="title" />
            <div class="abstract">
              <p />
              <p />
            </div>
          </div>
        </li>
      </ul>
    </div>
    <!--  正文  -->
    <div v-else class="joe_detail" data-cid="1508">
      <h1 class="joe_detail__title">
        <svg t="1674117305714" class="icon" style="height: 2em;width: 2em;" viewBox="0 0 1239 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="30350" width="200" height="200"><path d="M1231.698113 530.716981H8.090566l120.754717-257.569811H1110.943396l120.754717 257.569811z" fill="#34CA9D" p-id="30351" /><path d="M30.188679 553.056604h1179.411321v366.128302H30.188679z" fill="#FFFFFF" p-id="30352" /><path d="M1233.750943 943.215094H6.037736V528.90566h1227.713207z m-1179.41132-48.301886h1131.109434V577.207547H54.339623z" fill="#282D33" p-id="30353" /><path d="M619.954717 115.924528l403.683019 287.879246H216.271698L619.954717 115.924528z" fill="#FFFFFF" p-id="30354" /><path d="M1023.637736 427.954717H216.271698l-14.007547-43.833962L605.94717 96.603774h28.015094l403.683019 287.516981z m-731.89434-48.301887h656.422642L619.954717 145.630189z" fill="#282D33" p-id="30355" /><path d="M348.860377 394.988679l271.09434-185.962264 270.973585 185.962264H348.860377z" fill="#34CA9D" p-id="30356" /><path d="M271.698113 504.754717h696.392453v414.430189H271.698113z" fill="#FFFFFF" p-id="30357" /><path d="M992.241509 943.215094H247.54717V480.603774h744.694339z m-696.392452-48.301886h648.090566V528.90566H295.849057z" fill="#282D33" p-id="30358" /><path d="M24.150943 919.064151h1191.486793v80.664151H24.150943z" fill="#FFFFFF" p-id="30359" /><path d="M1239.788679 1024H0V894.913208h1239.788679zM48.301887 975.698113h1143.184905v-32.483019H48.301887z" fill="#282D33" p-id="30360" /><path d="M235.471698 403.803774h768.845283v100.950943H235.471698z" fill="#FFFFFF" p-id="30361" /><path d="M1028.467925 528.90566H211.320755V379.65283h817.14717z m-768.845283-48.301886h720.543396v-52.649057H259.622642z" fill="#282D33" p-id="30362" /><path d="M619.954717 112.90566z" fill="#FFFFFF" p-id="30363" /><path d="M595.803774 0h48.301886v112.90566h-48.301886z" fill="#282D33" p-id="30364" /><path d="M668.618868 99.260377V1.932075h149.49434l-21.49434 48.664151 21.49434 48.664151H668.618868zM489.539623 895.033962v-225.81132a73.177358 73.177358 0 0 0-146.354717 0v225.81132zM693.132075 895.033962v-225.81132a73.177358 73.177358 0 1 0-146.354717 0v225.81132zM896.603774 895.033962v-225.81132a73.177358 73.177358 0 1 0-146.233963 0v225.81132z" fill="#F8C44F" p-id="30365" /><path d="M88.633962 631.426415h48.301887v64.362264h-48.301887zM171.109434 631.426415h48.301887v64.362264h-48.301887zM88.633962 728.030189h48.301887v64.362264h-48.301887zM171.109434 728.030189h48.301887v64.362264h-48.301887zM1020.377358 631.426415h48.301887v64.362264h-48.301887zM1102.973585 631.426415h48.301887v64.362264h-48.301887zM1020.377358 728.030189h48.301887v64.362264h-48.301887zM1102.973585 728.030189h48.301887v64.362264h-48.301887z" fill="#282D33" p-id="30366" /><path d="M619.954717 315.411321m-36.226415 0a36.226415 36.226415 0 1 0 72.45283 0 36.226415 36.226415 0 1 0-72.45283 0Z" fill="#FFFFFF" p-id="30367" /></svg>
        {{ form.roomName }}
      </h1>
<!--      <div style="width: 1260px;text-align: center">
        <el-row>
          <el-col span="8" offset="4">
            <div class="room_abstract">
          <span style="font-size: 17px;text-align: center;margin: 0 auto">
            点击查看大图
            <svg t="1674114597911" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="25552" width="200" height="200"><path d="M877.677714 548.571429c0-113.700571-73.142857-210.870857-73.142857-310.857143V219.428571H438.820571v18.285715c0 60.562286-51.419429 101.156571-93.147428 137.728-26.294857 23.442286-52.553143 45.129143-82.870857 64-12.580571 8.009143-25.709714 14.848-38.838857 21.723428S146.249143 496.603429 146.249143 512.036571c0 48.566857 18.285714 91.428571 73.142857 91.428572 73.142857 0 110.299429-54.857143 146.285714-54.857143v329.142857c0 38.290286 34.304 73.142857 73.142857 73.142857 39.424 0 73.142857-33.718857 73.142858-73.142857v-189.147428c14.848 11.446857 40.009143 20.004571 58.843428 20.004571 26.843429 0 49.700571-10.861714 67.986286-30.281143 11.995429 6.838857 25.709714 10.276571 39.424 10.276572 26.294857 0 58.843429-13.129143 72.009143-37.156572 10.276571 1.718857 21.138286 2.304 32 2.304 67.437714 0 95.414857-41.728 95.414857-105.142857zM804.534857 109.714286c0-20.004571-16.566857-36.571429-36.571428-36.571429s-36.571429 16.566857-36.571429 36.571429 16.566857 36.571429 36.571429 36.571428 36.571429-16.566857 36.571428-36.571428z m146.285714 436.589714c0 105.142857-59.428571 181.723429-168.557714 181.138286l-2.852571-0.585143c-28.562286 22.857143-65.133714 34.852571-101.705143 34.852571-8.009143 0-16.566857-0.585143-24.576-1.718857a188.342857 188.342857 0 0 1-67.986286 21.138286V877.714286c0 80.018286-66.852571 146.285714-146.870857 146.285714-78.848 0-145.700571-67.437714-145.700571-146.285714v-213.723429c-22.272 9.142857-49.152 12.580571-73.142858 12.580572-96 0-146.285714-73.728-146.285714-164.571429 0-76.580571 97.718857-101.156571 150.857143-134.290286 26.843429-17.152 50.285714-36.571429 73.728-57.161143 18.870857-16.566857 67.986286-55.442286 67.986286-82.870857v-164.571428c0-40.557714 32.585143-73.142857 73.142857-73.142857h365.714286c40.557714 0 73.142857 32.585143 73.142857 73.142857v164.571428c0 35.986286 21.138286 92.562286 33.718857 127.414857 21.138286 58.294857 39.424 118.272 39.424 181.138286z" fill="" p-id="25553" /></svg>
          </span>
              <img
                height="200px"
                :src="conferenceRoom.roomType.roomCover"
              >
            </div>
          </el-col>
          <el-col span="8">
            <div id="charts" class="room_abstract" />
            <div class="room_abstract"></div>
          </el-col>
        </el-row>
      </div>-->
      <el-row>
        <el-col span="8" offset="4">
          <el-row>
            <el-col offset="5">
              <span style="font-size: 17px;font-weight: bold;text-align: center;margin: 0 auto">
            点击查看大图
            <svg t="1674114597911" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="25552" width="200" height="200"><path d="M877.677714 548.571429c0-113.700571-73.142857-210.870857-73.142857-310.857143V219.428571H438.820571v18.285715c0 60.562286-51.419429 101.156571-93.147428 137.728-26.294857 23.442286-52.553143 45.129143-82.870857 64-12.580571 8.009143-25.709714 14.848-38.838857 21.723428S146.249143 496.603429 146.249143 512.036571c0 48.566857 18.285714 91.428571 73.142857 91.428572 73.142857 0 110.299429-54.857143 146.285714-54.857143v329.142857c0 38.290286 34.304 73.142857 73.142857 73.142857 39.424 0 73.142857-33.718857 73.142858-73.142857v-189.147428c14.848 11.446857 40.009143 20.004571 58.843428 20.004571 26.843429 0 49.700571-10.861714 67.986286-30.281143 11.995429 6.838857 25.709714 10.276571 39.424 10.276572 26.294857 0 58.843429-13.129143 72.009143-37.156572 10.276571 1.718857 21.138286 2.304 32 2.304 67.437714 0 95.414857-41.728 95.414857-105.142857zM804.534857 109.714286c0-20.004571-16.566857-36.571429-36.571428-36.571429s-36.571429 16.566857-36.571429 36.571429 16.566857 36.571429 36.571429 36.571428 36.571429-16.566857 36.571428-36.571428z m146.285714 436.589714c0 105.142857-59.428571 181.723429-168.557714 181.138286l-2.852571-0.585143c-28.562286 22.857143-65.133714 34.852571-101.705143 34.852571-8.009143 0-16.566857-0.585143-24.576-1.718857a188.342857 188.342857 0 0 1-67.986286 21.138286V877.714286c0 80.018286-66.852571 146.285714-146.870857 146.285714-78.848 0-145.700571-67.437714-145.700571-146.285714v-213.723429c-22.272 9.142857-49.152 12.580571-73.142858 12.580572-96 0-146.285714-73.728-146.285714-164.571429 0-76.580571 97.718857-101.156571 150.857143-134.290286 26.843429-17.152 50.285714-36.571429 73.728-57.161143 18.870857-16.566857 67.986286-55.442286 67.986286-82.870857v-164.571428c0-40.557714 32.585143-73.142857 73.142857-73.142857h365.714286c40.557714 0 73.142857 32.585143 73.142857 73.142857v164.571428c0 35.986286 21.138286 92.562286 33.718857 127.414857 21.138286 58.294857 39.424 118.272 39.424 181.138286z" fill="" p-id="25553" /></svg>
            </span>
            </el-col>
          </el-row>
          <el-row>
            <el-col>
              <el-image
                style="height: 200px"
                :src="conferenceRoom.roomType.roomCover"
                :preview-src-list="conferenceRoom.roomType.roomCover"
              >
              </el-image>
            </el-col>
          </el-row>
        </el-col>
        <el-col span="8">
          <div id="charts" class="room_abstract" />
        </el-col>
      </el-row>

      <el-row>
        <el-col>
          <div class="block" style="text-align: center">
        <span style="margin-right: 10px;font-size: 17px">
          查看类型介绍
          <svg t="1674114286620" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16485" width="200" height="200"><path d="M896 384 548.192 384C570.656 303.104 582.016 283.424 582.016 198.016c0-73.888-60.128-134.016-134.016-134.016-73.888 0-134.016 60.128-134.016 134.016 0 103.968-38.72 151.936-115.104 205.696-2.272 1.6-4.576 3.168-6.912 4.704L192 320 0 320l0 640 192 0 0-56.992c63.648 4.288 81.12 22.208 102.432 44.096 16.448 16.896 36.928 37.92 74.016 53.28C407.424 1016.48 458.112 1024 528 1024l48 0 16.992 0c61.952 0 112.32-51.264 112.32-114.272 0-10.464-1.408-20.864-4.192-30.912 19.712-20.992 30.976-48.992 30.976-78.816 0-10.464-1.408-20.864-4.192-30.912 19.712-20.992 30.976-48.992 30.976-78.816 0-18.048-4.128-35.104-11.488-50.272L896 640c70.688 0 128-57.312 128-128C1024 441.312 966.688 384 896 384zM96 896c-17.664 0-32-14.336-32-32s14.336-32 32-32 32 14.336 32 32S113.664 896 96 896zM890.016 576 640.544 576 634.016 576l0 64 6.528 0c26.656 0 48.32 22.56 48.32 50.272 0 17.376-8.48 33.28-22.656 42.592l-24.8 16.256 14.304 25.952c4.16 7.552 6.368 16.192 6.368 24.928 0 17.376-8.48 33.28-22.656 42.592l-24.8 16.256 14.304 25.952c4.16 7.552 6.368 16.192 6.368 24.928 0 27.712-21.664 50.272-48.32 50.272L570.016 960l-48 0c-126.56 0-152.096-38.208-179.104-65.952-27.584-28.32-58.496-60-150.88-66.72L192 492.96c15.744-8.256 30.688-17.248 44.672-27.104C333.056 398.016 384 326.304 384 198.016c0-31.968 30.016-58.016 62.016-58.016s60 26.016 60 58.016c0 85.664-12.416 105.408-36.96 186.016-6.112 22.752-11.936 45.28-15.872 63.328L890.016 448c35.296 0 64 28.704 64 64C954.016 547.296 925.28 576 890.016 576z" fill="#13227a" p-id="16486" /></svg>
        </span>
            <el-popover
              :title="conferenceRoom.roomType.roomTypeName"
              width="200"
              trigger="click"
              :content="conferenceRoom.roomType.roomTypeDesc"
            >
              <el-button slot="reference">{{ conferenceRoom.roomType.roomTypeName }}</el-button>
            </el-popover>
            <span style="margin-right: 10px;font-size: 17px">
          选择预约日期
          <svg t="1674114286620" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16485" width="200" height="200"><path d="M896 384 548.192 384C570.656 303.104 582.016 283.424 582.016 198.016c0-73.888-60.128-134.016-134.016-134.016-73.888 0-134.016 60.128-134.016 134.016 0 103.968-38.72 151.936-115.104 205.696-2.272 1.6-4.576 3.168-6.912 4.704L192 320 0 320l0 640 192 0 0-56.992c63.648 4.288 81.12 22.208 102.432 44.096 16.448 16.896 36.928 37.92 74.016 53.28C407.424 1016.48 458.112 1024 528 1024l48 0 16.992 0c61.952 0 112.32-51.264 112.32-114.272 0-10.464-1.408-20.864-4.192-30.912 19.712-20.992 30.976-48.992 30.976-78.816 0-10.464-1.408-20.864-4.192-30.912 19.712-20.992 30.976-48.992 30.976-78.816 0-18.048-4.128-35.104-11.488-50.272L896 640c70.688 0 128-57.312 128-128C1024 441.312 966.688 384 896 384zM96 896c-17.664 0-32-14.336-32-32s14.336-32 32-32 32 14.336 32 32S113.664 896 96 896zM890.016 576 640.544 576 634.016 576l0 64 6.528 0c26.656 0 48.32 22.56 48.32 50.272 0 17.376-8.48 33.28-22.656 42.592l-24.8 16.256 14.304 25.952c4.16 7.552 6.368 16.192 6.368 24.928 0 17.376-8.48 33.28-22.656 42.592l-24.8 16.256 14.304 25.952c4.16 7.552 6.368 16.192 6.368 24.928 0 27.712-21.664 50.272-48.32 50.272L570.016 960l-48 0c-126.56 0-152.096-38.208-179.104-65.952-27.584-28.32-58.496-60-150.88-66.72L192 492.96c15.744-8.256 30.688-17.248 44.672-27.104C333.056 398.016 384 326.304 384 198.016c0-31.968 30.016-58.016 62.016-58.016s60 26.016 60 58.016c0 85.664-12.416 105.408-36.96 186.016-6.112 22.752-11.936 45.28-15.872 63.328L890.016 448c35.296 0 64 28.704 64 64C954.016 547.296 925.28 576 890.016 576z" fill="#13227a" p-id="16486" /></svg>
              <!--          <svg t="1674113524988" class="icon" viewBox="0 0 1466 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9764" width="200" height="200"><path d="M0 512a61.097852 61.097852 0 0 1 61.097852-61.097852h1038.663485a61.097852 61.097852 0 0 1 0 122.195704H61.097852a61.097852 61.097852 0 0 1-61.097852-61.097852z" fill="#13227a" p-id="9765"></path><path d="M1099.761337 450.902148h-274.940335v122.195704H1099.761337a61.097852 61.097852 0 1 0 0-122.195704z" fill="#13227a" p-id="9766"></path><path d="M870.644391 993.451074V30.548926a30.548926 30.548926 0 0 1 50.711218-22.606205L1455.961814 488.782816a30.548926 30.548926 0 0 1 0 45.212411l-534.606205 481.451074a30.548926 30.548926 0 0 1-50.711218-21.995227z" fill="#13227a" p-id="9767"></path></svg>-->
        </span>
            <el-date-picker
              v-model="curDate"
              type="date"
              placeholder="选择日期"
              :picker-options="dateOptions"
              style="background-color: #d4ecce;"
              @change="changeCurDate"
            />
            <span style="margin-right: 10px;font-size: 17px">
          自定义预约时段
          <svg t="1674114286620" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16485" width="200" height="200"><path d="M896 384 548.192 384C570.656 303.104 582.016 283.424 582.016 198.016c0-73.888-60.128-134.016-134.016-134.016-73.888 0-134.016 60.128-134.016 134.016 0 103.968-38.72 151.936-115.104 205.696-2.272 1.6-4.576 3.168-6.912 4.704L192 320 0 320l0 640 192 0 0-56.992c63.648 4.288 81.12 22.208 102.432 44.096 16.448 16.896 36.928 37.92 74.016 53.28C407.424 1016.48 458.112 1024 528 1024l48 0 16.992 0c61.952 0 112.32-51.264 112.32-114.272 0-10.464-1.408-20.864-4.192-30.912 19.712-20.992 30.976-48.992 30.976-78.816 0-10.464-1.408-20.864-4.192-30.912 19.712-20.992 30.976-48.992 30.976-78.816 0-18.048-4.128-35.104-11.488-50.272L896 640c70.688 0 128-57.312 128-128C1024 441.312 966.688 384 896 384zM96 896c-17.664 0-32-14.336-32-32s14.336-32 32-32 32 14.336 32 32S113.664 896 96 896zM890.016 576 640.544 576 634.016 576l0 64 6.528 0c26.656 0 48.32 22.56 48.32 50.272 0 17.376-8.48 33.28-22.656 42.592l-24.8 16.256 14.304 25.952c4.16 7.552 6.368 16.192 6.368 24.928 0 17.376-8.48 33.28-22.656 42.592l-24.8 16.256 14.304 25.952c4.16 7.552 6.368 16.192 6.368 24.928 0 27.712-21.664 50.272-48.32 50.272L570.016 960l-48 0c-126.56 0-152.096-38.208-179.104-65.952-27.584-28.32-58.496-60-150.88-66.72L192 492.96c15.744-8.256 30.688-17.248 44.672-27.104C333.056 398.016 384 326.304 384 198.016c0-31.968 30.016-58.016 62.016-58.016s60 26.016 60 58.016c0 85.664-12.416 105.408-36.96 186.016-6.112 22.752-11.936 45.28-15.872 63.328L890.016 448c35.296 0 64 28.704 64 64C954.016 547.296 925.28 576 890.016 576z" fill="#13227a" p-id="16486" /></svg>
        </span>
            <el-button @click="customizeAppoint()">Customize</el-button>
            <!--        <el-date-picker
              v-model="curDate"
              type="date"
              placeholder="选择日期"
              :picker-options="dateOptions"
              class="demo"
              @change="changeCurDate"
            />-->
          </div>
        </el-col>
      </el-row>

      <svg class="icon curicon" aria-hidden="true">
        <use xlink:href="#icon-shangwu" />
      </svg>
      <el-divider class="lines" />
      <ul class="joe_detail__friends">
        <template v-for="item in amTimes">
          <li class="joe_detail__friends-item">
            <a
              class="contain"
              target="_blank"
              rel="noopener noreferrer"
              :style="{background: getColor(item.available)}"
              @click="appoint(item)"
            >
              <span class="title">预约时段</span>
              <div class="content">
                <div class="desc common">
                  <svg v-if="item.available == 0" t="1673936367984" style="height: 2em;width: 2em" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3157" width="200" height="200"><path d="M860.921825 1024H163.673351a163.673351 163.673351 0 0 1-163.673351-163.673351V269.168265a163.673351 163.673351 0 0 1 163.673351-163.673351h697.248474a163.673351 163.673351 0 0 1 163.673351 163.673351v591.604766a163.673351 163.673351 0 0 1-163.673351 163.226969zM163.673351 195.217669a74.396978 74.396978 0 0 0-74.396978 74.396978v591.158384a74.396978 74.396978 0 0 0 74.396978 74.396978h697.248474a74.396978 74.396978 0 0 0 74.396978-74.396978V269.168265a74.396978 74.396978 0 0 0-74.396978-74.396978z" fill="#727171" p-id="3158" /><path d="M251.164196 0m44.638187 0l0 0q44.638187 0 44.638187 44.638187l0 194.622493q0 44.638187-44.638187 44.638187l0 0q-44.638187 0-44.638187-44.638187l0-194.622493q0-44.638187 44.638187-44.638187Z" fill="#727171" p-id="3159" /><path d="M292.036134 662.651877m31.563964-31.563964l0 0q31.563964-31.563964 63.127929 0l125.414152 125.414152q31.563964 31.563964 0 63.127928l0 0q-31.563964 31.563964-63.127929 0l-125.414152-125.414152q-31.563964-31.563964 0-63.127928Z" fill="#727171" p-id="3160" /><path d="M479.918422 851.381445m-31.563964-31.563965l0 0q-31.563964-31.563964 0-63.127929l174.864363-174.864363q31.563964-31.563964 63.127929 0l0 0q31.563964 31.563964 0 63.127929l-174.864363 174.864363q-31.563964 31.563964-63.127929 0Z" fill="#727171" p-id="3161" /><path d="M686.386516 0m44.638186 0l0 0q44.638187 0 44.638187 44.638187l0 194.622493q0 44.638187-44.638187 44.638187l0 0q-44.638187 0-44.638186-44.638187l0-194.622493q0-44.638187 44.638186-44.638187Z" fill="#727171" p-id="3162" /><path d="M83.027027 402.338855h858.09474v89.276373H83.027027z" fill="#727171" p-id="3163" /></svg>
                  <svg v-else t="1673936599583" class="icon" style="height: 2.5em;width: 2.5em" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1735" width="200" height="200"><path d="M896 256a85.333333 85.333333 0 0 0-85.333333-85.333333h-42.666667V106.666667a21.333333 21.333333 0 0 0-21.333333-21.333334h-42.666667a21.333333 21.333333 0 0 0-21.333333 21.333334V170.666667H341.333333V106.666667a21.333333 21.333333 0 0 0-21.333333-21.333334h-42.666667a21.333333 21.333333 0 0 0-21.333333 21.333334V170.666667H213.333333a85.333333 85.333333 0 0 0-85.333333 85.333333v554.666667a85.333333 85.333333 0 0 0 85.333333 85.333333h597.333334a85.333333 85.333333 0 0 0 85.333333-85.333333z m-85.333333 554.666667H213.333333V341.333333h597.333334z m-245.76-256l68.693333-69.12a20.48 20.48 0 0 0 0-29.866667l-22.613333-22.613333a20.48 20.48 0 0 0-29.866667 0L512 501.76l-69.12-68.693333a20.48 20.48 0 0 0-29.866667 0l-22.613333 22.613333a20.48 20.48 0 0 0 0 29.866667L459.093333 554.666667l-68.693333 69.12a20.48 20.48 0 0 0 0 29.866666l22.613333 22.613334a20.48 20.48 0 0 0 29.866667 0L512 607.573333l69.12 68.693334a20.48 20.48 0 0 0 29.866667 0l22.613333-22.613334a20.48 20.48 0 0 0 0-29.866666z" p-id="1736" /></svg>
                  {{ item.time }}
                  {{ calStatus(item.available) }}
                  <!--                  {{ item.available ? '可预约':'已预约' }}-->
                </div>
              </div>
            </a>
          </li>
        </template>
      </ul>
      <svg t="1673928398098" class="icon curicon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4474" width="200" height="200"><path d="M763.54 477.28c-0.79-3.49-2.62-6.79-5.48-9.35-7.34-6.63-18.66-6.03-25.26 1.31L585.9 632.36 438.19 468.24a0.256 0.256 0 0 0-0.13-0.1c-3.27-3.56-7.94-5.82-13.15-5.82-9.88 0-17.9 8.02-17.9 17.9v322c0 9.88 8.02 17.87 17.9 17.87 9.88 0 17.87-7.99 17.87-17.87V526.83L572.6 671.06c3.54 3.93 8.41 5.92 13.29 5.92h0.03c0.58 0 1.15-0.03 1.73-0.08 0.16-0.03 0.32-0.05 0.47-0.08 0.42-0.05 0.84-0.1 1.26-0.18 0.18-0.05 0.37-0.08 0.58-0.13 0.37-0.1 0.73-0.18 1.1-0.29 0.21-0.08 0.42-0.13 0.63-0.21 0.34-0.1 0.68-0.24 1.02-0.39 0.21-0.08 0.42-0.16 0.63-0.26 0.34-0.16 0.65-0.32 0.97-0.47 0.21-0.13 0.42-0.24 0.63-0.37 0.31-0.16 0.6-0.37 0.89-0.58l0.63-0.39c0.34-0.26 0.66-0.53 1-0.81 0.13-0.1 0.26-0.21 0.39-0.31l0.03-0.03c0.47-0.42 0.92-0.86 1.34-1.34L729 526.91v275.3c0 9.88 8.02 17.87 17.9 17.87 9.88 0 17.87-7.99 17.87-17.87v-322c0-1.09-0.45-2.06-1.23-2.93zM246.01 462.32H102.9c-9.88 0-17.9 8.02-17.9 17.9v322c0 9.88 8.02 17.87 17.9 17.87 9.88 0 17.87-7.99 17.87-17.87v-89.46H246c69.15 0 125.23-56.05 125.23-125.2 0.01-69.16-56.07-125.24-125.22-125.24z m0 214.66H120.78v-178.9h125.23c49.32 0 89.43 40.12 89.43 89.46 0 49.33-40.12 89.44-89.43 89.44z" fill="#967ADA" p-id="4475" /><path d="M836.81 408.65c-49.58 0-89.91-40.33-89.91-89.93 0-37.47 23.35-70.38 56.92-83.67 4.32 62.37 54.29 112.36 116.66 116.66-13.26 33.57-46.18 56.94-83.67 56.94z" fill="#FECD57" p-id="4476" /><path d="M929.23 334.13c-59.53 0-107.8-48.27-107.8-107.8 0-4.9 0.32-9.72 0.94-14.44-52.7 7.05-93.37 52.2-93.37 106.83 0 59.56 48.27 107.83 107.8 107.83 54.66 0 99.81-40.67 106.86-93.39-4.71 0.63-9.53 0.97-14.43 0.97z m-92.42 56.63c-39.7 0-72.04-32.31-72.04-72.04 0-21.88 9.93-41.8 25.73-55.13 6.42 24.08 19.1 46.17 37.18 64.25 18.11 18.11 40.17 30.79 64.25 37.21-13.3 15.77-33.24 25.71-55.12 25.71z" fill="#F5BA45" p-id="4477" /></svg>
      <el-divider class="lines" />
      <ul class="joe_detail__friends">
        <template v-for="item in pmTimes">
          <li class="joe_detail__friends-item"><!--id="time_block" -->
            <a
              class="contain"
              target="_blank"
              rel="noopener noreferrer"
              :style="{background: getColor(item.available)}"
              @click="appoint(item)"
            >
              <span class="title">预约时段</span>
              <div class="content">
                <div class="desc common">
                  <svg v-if="item.available === 0" t="1673936367984" style="height: 2em;width: 2em" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3157" width="200" height="200"><path d="M860.921825 1024H163.673351a163.673351 163.673351 0 0 1-163.673351-163.673351V269.168265a163.673351 163.673351 0 0 1 163.673351-163.673351h697.248474a163.673351 163.673351 0 0 1 163.673351 163.673351v591.604766a163.673351 163.673351 0 0 1-163.673351 163.226969zM163.673351 195.217669a74.396978 74.396978 0 0 0-74.396978 74.396978v591.158384a74.396978 74.396978 0 0 0 74.396978 74.396978h697.248474a74.396978 74.396978 0 0 0 74.396978-74.396978V269.168265a74.396978 74.396978 0 0 0-74.396978-74.396978z" fill="#727171" p-id="3158" /><path d="M251.164196 0m44.638187 0l0 0q44.638187 0 44.638187 44.638187l0 194.622493q0 44.638187-44.638187 44.638187l0 0q-44.638187 0-44.638187-44.638187l0-194.622493q0-44.638187 44.638187-44.638187Z" fill="#727171" p-id="3159" /><path d="M292.036134 662.651877m31.563964-31.563964l0 0q31.563964-31.563964 63.127929 0l125.414152 125.414152q31.563964 31.563964 0 63.127928l0 0q-31.563964 31.563964-63.127929 0l-125.414152-125.414152q-31.563964-31.563964 0-63.127928Z" fill="#727171" p-id="3160" /><path d="M479.918422 851.381445m-31.563964-31.563965l0 0q-31.563964-31.563964 0-63.127929l174.864363-174.864363q31.563964-31.563964 63.127929 0l0 0q31.563964 31.563964 0 63.127929l-174.864363 174.864363q-31.563964 31.563964-63.127929 0Z" fill="#727171" p-id="3161" /><path d="M686.386516 0m44.638186 0l0 0q44.638187 0 44.638187 44.638187l0 194.622493q0 44.638187-44.638187 44.638187l0 0q-44.638187 0-44.638186-44.638187l0-194.622493q0-44.638187 44.638186-44.638187Z" fill="#727171" p-id="3162" /><path d="M83.027027 402.338855h858.09474v89.276373H83.027027z" fill="#727171" p-id="3163" /></svg>
                  <svg v-else t="1673936599583" class="icon" style="height: 2.5em;width: 2.5em" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1735" width="200" height="200"><path d="M896 256a85.333333 85.333333 0 0 0-85.333333-85.333333h-42.666667V106.666667a21.333333 21.333333 0 0 0-21.333333-21.333334h-42.666667a21.333333 21.333333 0 0 0-21.333333 21.333334V170.666667H341.333333V106.666667a21.333333 21.333333 0 0 0-21.333333-21.333334h-42.666667a21.333333 21.333333 0 0 0-21.333333 21.333334V170.666667H213.333333a85.333333 85.333333 0 0 0-85.333333 85.333333v554.666667a85.333333 85.333333 0 0 0 85.333333 85.333333h597.333334a85.333333 85.333333 0 0 0 85.333333-85.333333z m-85.333333 554.666667H213.333333V341.333333h597.333334z m-245.76-256l68.693333-69.12a20.48 20.48 0 0 0 0-29.866667l-22.613333-22.613333a20.48 20.48 0 0 0-29.866667 0L512 501.76l-69.12-68.693333a20.48 20.48 0 0 0-29.866667 0l-22.613333 22.613333a20.48 20.48 0 0 0 0 29.866667L459.093333 554.666667l-68.693333 69.12a20.48 20.48 0 0 0 0 29.866666l22.613333 22.613334a20.48 20.48 0 0 0 29.866667 0L512 607.573333l69.12 68.693334a20.48 20.48 0 0 0 29.866667 0l22.613333-22.613334a20.48 20.48 0 0 0 0-29.866666z" p-id="1736" /></svg>
                  {{ item.time }}
                  {{ calStatus(item.available) }}
                  <!--                  {{ item.available ? '可预约':'已预约' }}-->
                </div>
              </div>
            </a>
          </li>
        </template>
      </ul>
    </div>
    <div class="joe_detail__copyright">
      <div class="content">
        <div class="item">
          <svg class="icon" width="20" height="20" viewBox="0 0 1024 1024">
            <path
              d="M614.72 554.538c-49.086-6.399-100.27-2.1-149.256-2.1-119.465 0-209.04 95.972-206.84 215.437 0 17.095 8.498 31.99 23.493 40.488 14.896 10.697 34.09 14.896 53.285 17.095 61.882 6.398 123.664 6.398 198.342 6.398 40.488 0 93.872-2.1 142.858-4.298 27.692 0 53.284-4.3 78.877-14.896 19.194-8.498 29.89-19.194 31.99-40.488 8.498-104.57-72.478-204.84-172.75-217.636zM680.8 375.39c0-87.474-74.678-162.053-164.251-162.053-89.574 0-162.053 74.679-162.053 162.053-2.1 87.474 74.678 164.252 162.053 164.252 89.673 0 164.252-74.678 164.252-164.252z"
              fill="#FFF"
            />
            <path
              d="M512.35 0C228.733 0 .5 228.233.5 511.85s228.233 511.85 511.85 511.85 511.85-228.233 511.85-511.85S795.967 0 512.35 0zm275.12 772.074c-2.1 21.294-12.797 31.99-31.991 40.488-25.593 10.697-51.185 14.896-78.877 14.896-49.086 2.099-102.37 4.298-142.858 4.298-74.678 0-136.46 0-198.342-6.398-19.195-2.1-38.389-6.398-53.285-17.095-14.895-8.497-23.493-23.493-23.493-40.488-2.1-119.465 87.475-215.437 206.84-215.437 49.085 0 100.27-4.299 149.256 2.1 100.27 12.896 181.247 113.166 172.75 217.636zM354.495 375.39c0-87.474 72.479-162.053 162.053-162.053S680.8 288.016 680.8 375.39c0 89.574-74.679 164.252-164.252 164.252-87.375 0-164.152-76.778-162.053-164.252z"
              fill="#249FF8"
            />
          </svg>
          <span>版权属于：</span>
          <span class="text">满兴富</span>
        </div>
        <div class="item">
          <svg class="icon" width="20" height="20" viewBox="0 0 1024 1024">
            <path
              d="M511.854 0A511.854 511.854 0 1 0 1024 511.854 511.854 511.854 0 0 0 511.854 0z"
              fill="#39B54A"
            />
            <path
              d="M576.491 630.355L460.028 746.818a129.565 129.565 0 0 1-182.555 0l-2.038-2.038a128.983 128.983 0 0 1 0-182.264l81.233-81.233a179.644 179.644 0 0 0 13.102 70.46l-52.7 52.408a69.878 69.878 0 0 0 0 98.703l2.038 2.038a70.169 70.169 0 0 0 98.703 0l116.463-116.463a69.878 69.878 0 0 0 0-98.703l-2.039-2.038a69.587 69.587 0 0 0-13.975-10.772l42.509-42.51a128.11 128.11 0 0 1 13.102 11.356l2.038 2.038a129.274 129.274 0 0 1 0 182.264z"
              fill="#FFF"
            />
            <path
              d="M746.236 460.902l-81.233 81.233a179.353 179.353 0 0 0-13.102-70.46l52.7-52.409a69.878 69.878 0 0 0 0-98.702l-2.039-2.038a69.878 69.878 0 0 0-98.702 0L487.397 434.989a69.878 69.878 0 0 0 0 98.702l2.038 2.038a68.422 68.422 0 0 0 13.976 10.773l-42.51 42.51a136.553 136.553 0 0 1-13.101-11.356l-2.038-2.038a128.983 128.983 0 0 1 0-182.265l116.463-116.462a129.565 129.565 0 0 1 182.555 0l2.038 2.038a128.983 128.983 0 0 1 0 182.264z"
              fill="#FFF"
            />
          </svg>
          <span>本页链接：</span>
          <span class="text">
            <a
              class="link"
              :href="'https://www.mxfj.xyz/roomDetails/' + conferenceRoom.id"
              target="_blank"
              rel="noopener noreferrer nofollow"
            >mxfj.xyz/roomDetails/{{ conferenceRoom.id }}</a>
          </span>
        </div>
      </div>
    </div>
    <el-dialog title="创建预约" :visible.sync="dialogFormVisible" @closed="curDialogClosed()">
      <el-form ref="form" :rules="rules" class="ruleForm" :model="form" label-position="left" label-width="100px" style="width: 400px; margin-left:50px;">
        <el-form-item label="会议主题" label-width="auto" prop="conferenceSubject" required>
          <el-input v-model="form.conferenceSubject" style="width: 70%" />
        </el-form-item>
        <el-form-item label="预约用户" label-width="auto" prop="username" required>
          <el-input v-model="form.username" style="width: 70%" disabled />
        </el-form-item>
        <el-form-item label="参会人数" label-width="auto" prop="participationNums" required>
          <!--        <el-input v-model="form.participationNums" style="width: 40%" />-->
          <el-input-number v-model="form.participationNums" :min="2" :max="maxCapacity" label="参会人数" />
        </el-form-item>
        <el-form-item label="预约会议室" prop="roomName" required>
          <el-input v-model="form.roomName" disabled />
        </el-form-item>
        <el-form-item v-if="!customize" label="预约时段" label-width="auto" prop="appointTime" required>
          <el-input v-model="form.appointTime" style="width: 70%" disabled />
        </el-form-item>
        <el-form-item label="开始时间" prop="appointmentStartTime" required>
          <el-date-picker
            v-if="!customize"
            v-model="form.appointmentStartTime"
            type="datetime"
            placeholder="选择会议开始日期时间"
            disabled
          />
          <el-date-picker
            v-else
            v-model="form.appointmentStartTime"
            type="datetime"
            placeholder="选择会议开始日期时间"
            :picker-options="dateOptions"
          />
        </el-form-item>
        <el-form-item label="结束时间" prop="appointmentEndTime" required>
          <el-date-picker
            v-if="!customize"
            v-model="form.appointmentEndTime"
            type="datetime"
            placeholder="选择会议结束日期时间"
            disabled
          />
          <el-date-picker
            v-else
            v-model="form.appointmentEndTime"
            type="datetime"
            placeholder="选择会议结束日期时间"
            :picker-options="dateOptions"
          />
        </el-form-item>
        <el-form-item label="状态" prop="status" required>
          <el-input value="待审核" disabled/>
<!--          <el-select disabled placeholder="待审核" value="待审核" />-->
        </el-form-item>
        <el-form-item v-if="customize" label="注意" prop="notice" required>
          <span style="color: red;font-size: 15px">
            <svg t="1674979043740" class="icon" style="height: 2em;width: 2em" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3852" width="200" height="200"><path d="M604.67 294.21h16.93c49.42 0 89.47 40.06 89.47 89.47v191.93l12.14 19.44 65.38 104.72c5.58 8.93-0.85 20.51-11.38 20.51H347.36c-14.22 0-18.66-19.21-5.89-25.46 65.32-31.93 169.5-88.91 202.63-141.72 49.52-78.92 60.57-258.89 60.57-258.89z" fill="#B4E7B4" p-id="3853"></path><path d="M925.69 730.53L811.08 546.96V383.68c0-103.23-82.98-187.44-185.73-189.44v-12.5c0-21.81-8.54-42.37-24.03-57.86-15.5-15.51-36.05-24.06-57.87-24.06-45.16 0-81.91 36.75-81.91 81.92v12.5c-19.93 0.39-39.5 3.86-58.23 10.33-10.44 3.61-15.97 15-12.36 25.44s15 15.97 25.44 12.36c15.68-5.42 32.13-8.17 48.89-8.17h16.94c5.82 0 11.36-2.54 15.16-6.95 3.8-4.41 5.49-10.26 4.62-16.02-0.3-2.01-0.46-4.06-0.46-6.1v-23.39c0-23.11 18.8-41.92 41.91-41.92 11.13 0 21.63 4.38 29.58 12.33 7.95 7.95 12.33 18.45 12.33 29.58v23.39c0 2.04-0.15 4.1-0.46 6.11-0.86 5.76 0.82 11.61 4.62 16.02 3.8 4.41 9.33 6.95 15.16 6.95h16.93c82.42 0 149.47 67.05 149.47 149.47v169.01c0 3.75 1.05 7.42 3.04 10.59L891.77 751.7c5.26 8.42 2.1 16.06 0.49 18.95-1.6 2.89-6.41 9.63-16.35 9.63H212.29c-9.91 0-14.71-6.7-16.32-9.58s-4.78-10.49 0.42-18.92L312.82 563.2c1.95-3.16 2.98-6.79 2.98-10.51V383.68c0-21.25 4.36-41.77 12.96-60.98 4.51-10.08 0-21.91-10.09-26.42-10.08-4.51-21.91 0-26.42 10.09-10.91 24.39-16.45 50.41-16.45 77.32v163.33L162.35 730.78c-11.33 18.36-11.82 40.57-1.31 59.42s29.67 30.09 51.25 30.09H875.9c21.65 0 40.83-11.3 51.33-30.23s9.92-41.18-1.54-59.53z" fill="#004039" p-id="3854"></path><path d="M348.03 281.31c4.98 0 9.96-1.85 13.83-5.56 1.94-1.86 3.95-3.68 5.98-5.43 8.37-7.2 9.33-19.83 2.12-28.21-7.2-8.38-19.83-9.33-28.21-2.12-2.58 2.21-5.12 4.53-7.58 6.88-7.98 7.64-8.24 20.3-0.6 28.28a19.98 19.98 0 0 0 14.46 6.16zM605.35 840.05c-11.05 0-20 8.95-20 20v33.49c0 23.14-18.83 41.97-41.97 41.97s-41.97-18.83-41.97-41.97v-35.41c0-11.05-8.95-20-20-20s-20 8.95-20 20v35.41c0 45.2 36.77 81.97 81.97 81.97 45.2 0 81.97-36.77 81.97-81.97v-33.49c0-11.04-8.96-20-20-20zM337 553.11c0 11.05 8.95 20 20 20h231.64c11.05 0 20-8.96 20-20 0-11.05-8.95-20-20-20H357c-11.04 0-20 8.95-20 20zM690.7 573.11c11.05 0 20-8.96 20-20 0-11.05-8.95-20-20-20h-32.73c-11.05 0-20 8.95-20 20s8.95 20 20 20h32.73z" fill="#004039" p-id="3855"></path></svg>
            自定义时段需要经过人工审核!!!
          </span>
        </el-form-item>
      </el-form>
      <div slot="footer" class="dialog-footer">
        <el-button @click="dialogFormVisible = false">
          取消
        </el-button>
        <el-button type="primary" @click="createAppoint('form')">
          确认
        </el-button>
      </div>
    </el-dialog>
  </div>
</template>

<script>
import { getFileAccessHttpUrl } from '@/api/manage'
import moment from 'moment'
import { getToken, hasToken } from '@/utils/auth'
import { error, success, warning } from '@/utils/message'
import { queryConferenceRoomAppointStatus, queryRoomById } from '@/api/conference_room'
import jwt from 'jsonwebtoken'
import { createAppointment, queryAppointInfoById, queryAppointMax } from '@/api/appointment'
import echarts from 'echarts'

export default {
  name: 'RoomDetailsBody',
  components: {
  },
  data() {
    return {
      rules: {
        conferenceSubject: [{ required: true, message: '请输入会议主题', trigger: 'blur' },
          { max: 20, message: '主题长度不能超过20个字符', trigger: 'blur' }
        ]
      },
      loading: false,
      content: '',
      shareFlag: true,
      type: '',
      customize: false,
      conferenceRoom: {
        roomType: {
          roomCover: ''
        }
      },
      curDate: new Date(),
      dialogFormVisible: false,
      dateOptions: {
        disabledDate(time) { /* 返回false，日期才能被选中 */
          const start_Time = moment()
          const end_time = moment(time.getTime())
          if (end_time.diff(start_Time, 'days') === 0) return false
          return !(end_time > start_Time && end_time.diff(start_Time, 'days') < 6)
        }
      },
      amTimes: [ // available: 0: 可预约, 1: 已预约, 2: 时间已过，不可预约
        { time: '8:00-9:00', available: true },
        { time: '9:00-10:00', available: false },
        { time: '10:00-11:00', available: true },
        { time: '11:00-12:00', available: false }
      ],
      pmTimes: [
        { time: '14:00-16:00', available: true },
        { time: '16:00-18:00', available: false },
        { time: '18:00-20:00', available: true }
      ],
      form: {
        rooms: [],
        appointTime: undefined,
        roomName: undefined,
        username: undefined,
        conferenceSubject: undefined,
        participationNums: 2,
        appointmentUserId: undefined,
        appointmentRoomId: 1,
        appointmentStartTime: undefined,
        appointmentEndTime: undefined,
        appointmentCreateTime: undefined,
        appointmentStatus: undefined,
        status: true,
        notice: true
      },
      appointmentInfo: {
        id: undefined,
        conferenceSubject: undefined,
        participationNums: 0,
        appointmentUserId: undefined,
        appointmentRoomId: undefined,
        appointmentStartTime: undefined,
        appointmentEndTime: undefined,
        appointmentCreateTime: undefined,
        appointmentStatus: 0 /* 预约状态{0: 待审核, 1: 预约成功, 2: 预约失败, 3:会议进行, 4:预约完成, 5:用户取消预约} */
      },
      totalAppoints: undefined,
      totalUsers: undefined,
      maxCapacity: 30,
      charts: {},
      chartData: [],
      imageList: []
    }
  },
  computed: {
  },
  mounted() {
    this.init()
    this.initChart()
  },
  methods: {
    appoint(item) {
      if (hasToken()) {
        if (item.available === 0) {
          this.maxCapacity = this.conferenceRoom.roomType.roomTypeCapacity - 0
          this.form.appointTime = item.time
          this.dialogFormVisible = true

          // 计算会议预约的起止时间
          const array = item.time.split('-')
          const start = moment(this.curDate.getTime())
          start.set('minute', 1)
          start.set('second', 0)
          start.set('hour', array[0].split(':')[0])
          this.form.appointmentStartTime = start.toDate()
          start.set('minute', 0)
          start.set('hour', array[1].split(':')[0])
          this.form.appointmentEndTime = start.toDate()
          const tokenInfo = jwt.decode(getToken())
          this.form.username = tokenInfo.username
          /* success('预约成功')
          item.available = false */
        } else if (item.available === 1) {
          warning(item.time + ' 时段已被预约')
        } else {
          warning(item.time + '时段已经过去，不可以被预约')
        }
      } else {
        warning('请先登录')
      }
    },
    init() {
      // 获取路由携带的参数
      this.loading = true
      const id = this.$route.params.id
      // console.log('RoomID: ', id)
      queryRoomById(id).then(response => {
        // console.log('预约会议室 ', response.data.data)
        this.conferenceRoom = response.data.data
        this.form.appointmentRoomId = this.conferenceRoom.id
        this.form.roomName = this.conferenceRoom.roomName + '-' + this.conferenceRoom.roomType.roomTypeName
        this.imageList[0] = this.conferenceRoom.roomType.roomCover
      })
      queryAppointMax().then(response => {
        // console.log(response)
        this.totalAppoints = response.data.data[0]
        this.totalUsers = response.data.data[1]
      })
      this.queryRoomStatus(id)
      this.loading = false
      if (hasToken()) {
        const tokenInfo = jwt.decode(getToken())
        this.form.username = tokenInfo.username
      }
    },
    initChart() {
      queryAppointInfoById(this.$route.params.id).then(response => {
        const data = response.data.data
        // console.log('响应结果', data)
        this.chartData[0] = data.averageScore
        this.chartData[1] = data.roomArea
        this.chartData[2] = data.appointmentCount
        this.chartData[3] = data.userCount
        this.chartData[4] = data.equipmentNormalRate
        // 初始化eCharts
        // console.log(this.chartData)
        // console.log(this.totalAppoints)
        // console.log(this.totalUsers)
        this.chart = echarts.init(document.getElementById('charts'))
        this.chart.setOption({
          title: {
            text: '综合评分'
          },
          radar: {
            // shape: 'circle',
            indicator: [
              { name: '平均评分', max: 5 },
              { name: '面积', max: 110 },
              { name: '累计预约次数', max: this.totalAppoints },
              { name: '累计服务人数', max: this.totalUsers },
              { name: '设备正常率', max: 100 }
            ],
            name: { // 5.0.0以上版本改为: axisName
              fontStyle: 'oblique',
              fontWeight: 'bolder',
              fontSize: 15
            }
          },
          series: [
            {
              name: 'Budget vs spending',
              type: 'radar',
              data: [
                {
                  value: this.chartData, // [5, 50, 20, 100, 200]
                  name: '101t',
                  label: {
                    normal: {
                      show: true,
                      formatter: function(params) {
                        return params.value
                      }
                    }
                  },
                  lineStyle: {
                    color: '#409EFF'
                  },
                  areaStyle: {
                    color: new echarts.graphic.RadialGradient(
                      0.1,
                      0.6,
                      0.5,
                      [
                        {
                          color: 'rgba(255, 145, 124, 0.1)',
                          offset: 0
                        },
                        {
                          color: 'rgba(255, 145, 124, 0.9)',
                          offset: 1
                        }
                      ]
                    )
                  }
                }
              ]
            }
          ]
        })
      })
    },
    queryRoomStatus(id) {
      // console.log('查询日期：', this.curDate)
      queryConferenceRoomAppointStatus(id, this.curDate.getTime()).then(response => {
        /* console.log(this.curDate)
        console.log(response.data.data) */
        for (let i = 0; i < response.data.data.length; i++) {
          if (i <= 3) {
            if (this.parseLastTime(this.amTimes[i].time).getTime() <= new Date().getTime()) { // BUG: this.curDate.getTime()
              this.amTimes[i].available = 2
            } else {
              this.amTimes[i].available = !response.data.data[i] === true ? 0 : 1
            }
          } else {
            if (this.parseLastTime(this.pmTimes[i - 4].time).getTime() <= this.curDate.getTime()) {
              this.pmTimes[i - 4].available = 2
            } else {
              this.pmTimes[i - 4].available = !response.data.data[i] === true ? 0 : 1
            }
          }
        }
        // console.log('am: ', this.amTimes)
      })
    },
    parseLastTime(time) {
      const array = time.split('-')
      const start = moment(this.curDate.getTime())
      start.set('minute', 0)
      start.set('second', 0)
      start.set('hour', array[1].split(':')[0])
      return start.toDate()
    },
    /* 图片预览 */
    getImgView(text) {
      if (text && text.indexOf(',') > 0) {
        text = text.substring(0, text.indexOf(','))
      }
      return getFileAccessHttpUrl(text)
    },
    // 按需展示背景色
    getColor(flag) {
      /* const r = parseInt(Math.random() * 256)
      const g = parseInt(Math.random() * 256)
      const b = parseInt(Math.random() * 256)
      return `rgba(${r},${g},${b},0.9)` */
      // 不可预约,#909399
      switch (flag) {
        case 0:
          return 'rgba(153,239,131,0.8)'
        case 1:
          return 'rgba(231,111,102,0.9)'
        case 2:
          return '#909399'
      }
      // return flag ? 'rgba(153,239,131,0.8)' : 'rgba(231,111,102,0.9)'
    },
    createAppoint(formName) {
      // success('提交成功')
      this.$refs[formName].validate((valid) => {
        if (valid) {
          this.appointmentInfo.conferenceSubject = this.form.conferenceSubject
          this.appointmentInfo.participationNums = this.form.participationNums
          this.appointmentInfo.appointmentRoomId = this.form.appointmentRoomId
          this.appointmentInfo.appointmentStartTime = this.form.appointmentStartTime
          this.appointmentInfo.appointmentEndTime = this.form.appointmentEndTime
          if (this.customize) {
            this.appointmentInfo.appointmentStatus = 0
          } else {
            this.appointmentInfo.appointmentStatus = 1
          }
          console.log('数据：', this.appointmentInfo)
          createAppointment(this.appointmentInfo).then(response => {
            // console.log(response)
            if (response.status === 200) {
              success('预约申请成功')
              this.queryRoomStatus(this.appointmentInfo.appointmentRoomId)
              this.dialogFormVisible = false
              this.form.conferenceSubject = ''
              this.initChart()
              // this.resetForm('form')
            } else {
              error('预约申请失败')
            }
          })
        } else {
          warning('填写的表格不符合规范')
          // console.log('error submit!!')
          return false
        }
      })
    },
    changeCurDate() {
      this.queryRoomStatus(this.$route.params.id)
    },
    resetForm(formName) {
      this.$refs[formName].resetFields()
    },
    calStatus(num) {
      switch (num) {
        case 0:
          return '可预约'
        case 1:
          return '已预约'
        case 2:
          return '不可预约'
      }
    },
    customizeAppoint() {
      if (hasToken()) {
        this.customize = true
        this.dialogFormVisible = true
        this.appointmentInfo.appointmentStatus = 0
      } else {
        warning('请先登录')
      }
    },
    curDialogClosed() {
      this.customize = false
    }
  }
}
</script>

<style scoped>
#time_block {
  width: 50%;
  float: left;
  text-align:center;
  font-family: Monaco, Verdana, Sans-serif;
  font-size: 20px;
  background-color: #f9f9f9;
  border: 1px solid #D0D0D0;
  color: #666666;
  display: block;
  margin: 14px 0 14px 0;
  padding: 12px 10px 12px 10px;
}
.content-html {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

div.hide-article-box {
  width: 100%;
  background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0)), color-stop(70%, #fff));
  background-image: linear-gradient(
    -180deg, rgba(255, 255, 255, 0) 0%, #fff 70%);
  padding-bottom: 34px;
}

.hide-article-pos {
  position: relative;
  z-index: 998;
  padding-top: 160px;
  bottom: -1px;
  margin-top: -200px;
}

div.hide-article-box .follow-text {
  color: #ca0c16;
}
.is-selected {
  color: #1989FA;
}
.lines {
  margin-top: 0;
}
.curicon {
  width: 3em;
  height: 3em;
  /*vertical-align: -0.15em;*/
  fill: currentColor;
  overflow: hidden;
}
.common {
  font-size: 16px;
}
/*
.el-button .demo{
  color: black;
  font-size: 17px;
  background-color: #d4ecce;
}
*/

.el-input__inner.demo{
  color: black;
  font-size: 17px;
  background-color: #d4ecce;
  /*background-color:#409EFF;*/
}
.room_abstract {
  float: left;
  width: 420px;
  height: 300px;
  /*background-color: #da2626;*/
  /*border: 1px solid;*/
}

/*::v-deep .el-input__inner {
  background-color: #d4ecce;
  border-radius: 3px;
  font-size: 17px;
}*/

::v-deep .el-input__inner:hover {
  cursor: pointer;
}

::v-deep .el-input__icon {
  height: 15px;
}
</style>
<!--<style type="less">
.el-picker-panel {
  background: #0f0472a9 !important;
  color: #ffffff;
  border: 1px solid #93bee7 !important;
  line-height: 20px;
}
.el-picker-panel .el-date-range-picker__time-header {
  border-bottom: 1px solid #93bee7 !important;
}
.el-picker-panel__icon-btn {
  width: 8px;
  height: 10px;
  color: #cbd3f0 !important;
}
.el-picker-panel .el-input__inner {
  background-color: #19466f;
  border: #75ebf2;
  color: #e8fdff;
}
.el-date-picker__header-label {
  color: #6ce6cb !important;
}
.el-date-picker__header-label:hover {
  color: #ffffff;
}
.el-date-table td.disabled div {
  background-color: #6891cfa8 !important;
}
.el-picker-panel .el-date-table th {
  color: #c3e3ec;
}
.el-picker-panel .el-date-table td.available {
  font-size: 16px;
  font-weight: bold;
  color: #6ce6cb;
}
.el-picker-panel .el-date-table td.available:hover {
  color: #ffffff;
}
</style>-->
